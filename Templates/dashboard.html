<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>

<div class="card card--wide">
  <h2 class="center">Welkom {{ username }}</h2>

  <div class="kv">
    <span>Rol:</span>
    <span class="badge">{{ role }}</span>
  </div>

  <div class="link-row">
    <a class="btn btn--ghost btn--sm" href="/choose-category">ğŸ¯ Start quiz via categorie</a>
    <a class="btn btn--ghost btn--sm" href="/my-scores">ğŸ“œ Mijn scores</a>
    <a class="btn btn--ghost btn--sm" href="/logout">Uitloggen</a>
  </div>

  <hr>

  <div class="grid grid--2">
    <!-- Actieve quizzen -->
    <section class="panel">
      <h3 class="panel__title">Beschikbare quizzen (actief)</h3>
      <p class="panel__hint">Kies een quiz en ga direct van start.</p>

      {% if quizzes %}
        <div class="stack">
          {% for q in quizzes %}
            <div class="item">
              <div>
                <b>{{ q.title }}</b>
                {% if q.category %}
                  <div class="item__meta">Categorie: {{ q.category }}</div>
                {% endif %}
              </div>

              <div class="item__actions">
                <a class="btn btn--sm" href="/quiz/{{ q.id }}/start">Start</a>
                <a class="btn btn--ghost btn--sm" href="/leaderboard/{{ q.id }}">ğŸ† Leaderboard</a>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-state">Er zijn momenteel geen actieve quizzen.</div>
      {% endif %}
    </section>

    <!-- Admin paneel -->
    {% if role == "admin" %}
    <section class="panel">
      <h3 class="panel__title">Admin</h3>
      <p class="panel__hint">Beheer quizzen, vragen en scores.</p>

      <div class="link-row" style="justify-content:flex-start; margin:0 0 10px;">
        <a class="btn btn--sm" href="/admin/create-quiz">â• Nieuwe quiz aanmaken</a>
      </div>

      {% if admin_quizzes %}
        <div class="stack stack--lg">
          {% for aq in admin_quizzes %}
            <div class="item" style="align-items:center;">
              <div>
                <b>{{ aq.title }}</b>
                {% if aq.category %}
                  <div class="item__meta">{{ aq.category }}</div>
                {% endif %}

                {% if aq.is_active == 1 %}
                  <div class="item__meta">
                    Status: <span class="badge badge--success">Actief</span>
                  </div>
                {% else %}
                  <div class="item__meta">
                    Status: <span class="badge badge--danger">Inactief</span>
                  </div>
                {% endif %}
              </div>

              <div class="item__actions">
                <a class="btn btn--ghost btn--sm" href="/admin/add-question/{{ aq.id }}">â• Vraag</a>
                <a class="btn btn--ghost btn--sm" href="/admin/questions/{{ aq.id }}">ğŸ“ Vragen</a>
                <a class="btn btn--ghost btn--sm" href="/admin/scores/{{ aq.id }}">ğŸ“Š Scores</a>
                <a class="btn btn--ghost btn--sm" href="/leaderboard/{{ aq.id }}">ğŸ†</a>

                <form method="POST" action="/admin/toggle-quiz/{{ aq.id }}" style="margin:0;">
                  {% if aq.is_active == 1 %}
                    <input type="hidden" name="is_active" value="0">
                    <button class="btn btn--danger btn--sm" type="submit">Zet inactief</button>
                  {% else %}
                    <input type="hidden" name="is_active" value="1">
                    <button class="btn btn--success btn--sm" type="submit">Zet actief</button>
                  {% endif %}
                </form>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="empty-state">Geen quizzen gevonden.</div>
      {% endif %}
    </section>
    {% endif %}
  </div>
</div>

</body>
</html>
